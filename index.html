<div id="status-banner">Connexion...</div>

<div class="update-banner">Calendrier Officiel Tempo <span id="tempo-date-header"></span></div>

<script>
// ... (début du script identique) ...

    async function refresh() {
        try {
            const resp = await fetch(API_LOCAL + Date.now());
            const mix = await resp.json();
            const f = mix[0];
            
            if (f) {
                const now = new Date();
                const dataDate = new Date(f.date_heure);
                const diffHours = (now - dataDate) / (1000 * 60 * 60);
                const banner = document.getElementById('status-banner');
                const isSameDay = now.toDateString() === dataDate.toDateString();
                
                // Formatage de la date courte (JJ/MM)
                const dateStr = dataDate.toLocaleDateString('fr-FR', {day: '2-digit', month: '2-digit'});

                // LOGIQUE DU BANDEAU AVEC DATE ET HEURE
                if (!isSameDay) {
                    banner.className = "status-archive";
                    banner.innerHTML = `⚠️ ARCHIVE : DONNÉES DU ${dateStr} À ${f.heure}`;
                } else if (diffHours > 2) {
                    banner.className = "status-delayed";
                    banner.innerHTML = `⏳ RETARDÉ (+2H) : MESURE DU ${dateStr} À ${f.heure}`;
                } else {
                    banner.className = "status-ok";
                    banner.innerHTML = `✅ DIRECT : ${dateStr} À ${f.heure}`;
                }
                
                // MISE À JOUR DE LA DATE DANS LE BANDEAU CALENDRIER
                document.getElementById('tempo-date-header').innerText = "- " + now.toLocaleDateString('fr-FR');

                // ... (Reste du code de production, flux et Tempo) ...

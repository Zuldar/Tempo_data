<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tempo Master Live</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --card: #161616;
            --blue: #2979ff;
            --green: #00e676;
            --red: #ff1744;
            --white: #ffffff;
        }
        body { background: var(--bg); color: white; font-family: -apple-system, sans-serif; margin: 0; padding: 15px; }
        .container { max-width: 400px; margin: auto; display: flex; flex-direction: column; gap: 15px; }
        
        /* HEADER & STATUT */
        .status-banner { text-align: center; padding: 12px; border-radius: 12px; font-weight: 900; font-size: 0.7rem; text-transform: uppercase; background: var(--blue); color: white; }
        
        .card { background: var(--card); border-radius: 18px; padding: 15px; border: 1px solid rgba(255,255,255,0.05); }
        .title { font-size: 0.65rem; font-weight: 900; color: var(--blue); text-transform: uppercase; margin-bottom: 12px; letter-spacing: 1px; }

        /* GRILLE PRODUCTION */
        .prod-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .prod-item { display: flex; justify-content: space-between; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 10px; font-size: 0.8rem; }
        .val-prod { font-weight: 900; font-family: monospace; color: var(--white); }

        /* FLUX FRONTIÃˆRES */
        .flux-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #222; }
        .flux-row:last-child { border: none; }
        .country { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        .mw { font-family: monospace; font-weight: 900; font-size: 1.1rem; }
        
        .import { color: var(--red); }
        .export { color: var(--green); }

        /* TEMPO */
        .tempo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .day { padding: 15px; border-radius: 12px; text-align: center; font-weight: 900; font-size: 0.8rem; }
        .bleu { background: linear-gradient(135deg, #0044ff, #001133); }
        .blanc { background: linear-gradient(135deg, #ffffff, #bbbbbb); color: black; }
        .rouge { background: linear-gradient(135deg, #ff0000, #440000); }
    </style>
</head>
<body>

<div class="container">
    <div id="status" class="status-banner">Mise Ã  jour : --:--</div>

    <div class="card">
        <div class="title">Mix Ã‰lectrique (GW)</div>
        <div class="prod-grid" id="prod-container">
            </div>
    </div>

    <div class="card">
        <div class="title">Ã‰changes FrontiÃ¨res (MW)</div>
        <div id="flux-container">
            </div>
    </div>

    <div class="card">
        <div class="title">Couleur Tempo</div>
        <div class="tempo-grid">
            <div class="day bleu">AUJOURD'HUI</div>
            <div class="day blanc">DEMAIN</div>
        </div>
    </div>
</div>

<script>
    async function update() {
        try {
            const r = await fetch("https://raw.githubusercontent.com/Zuldar/Tempo_data/main/archive_tempo.json?nocache=" + Date.now());
            const [d] = await r.json();

            document.getElementById('status').innerText = `RELEVÃ‰ TEMPS RÃ‰EL : ${d.heure}`;

            // 1. Production
            const pData = [
                {n: "NuclÃ©aire", v: d.nucleaire, c: "#2979ff"},
                {n: "Solaire", v: d.solaire, c: "#ffd600"},
                {n: "Ã‰olien", v: d.eolien, c: "#00e676"},
                {n: "Gaz", v: d.gaz, c: "#ff9100"}
            ];
            document.getElementById('prod-container').innerHTML = pData.map(p => `
                <div class="prod-item">
                    <span style="color:${p.c}">${p.n}</span>
                    <span class="val-prod">${p.v ? (p.v/1000).toFixed(1) : '0'}</span>
                </div>
            `).join('');

            // 2. Flux
            const fData = [
                {id: 'uk', n: 'Royaume-Uni', f: 'ðŸ‡¬ðŸ‡§'},
                {id: 'de_be', n: 'All. / Belg.', f: 'ðŸ‡©ðŸ‡ª'},
                {id: 'it', n: 'Italie', f: 'ðŸ‡®ðŸ‡¹'},
                {id: 'ch', n: 'Suisse', f: 'ðŸ‡¨ðŸ‡­'},
                {id: 'es', n: 'Espagne', f: 'ðŸ‡ªðŸ‡¸'}
            ];
            document.getElementById('flux-container').innerHTML = fData.map(p => {
                const v = d[p.id] || 0;
                const isImp = v > 0;
                return `
                    <div class="flux-row">
                        <div class="country"><span>${p.f}</span> ${p.n}</div>
                        <div class="mw ${isImp ? 'import' : 'export'}">
                            ${isImp ? 'â†“' : 'â†‘'} ${Math.abs(v)}
                        </div>
                    </div>`;
            }).join('');

        } catch (e) { console.error(e); }
    }
    update();
    setInterval(update, 60000);
</script>
</body>
</html>
